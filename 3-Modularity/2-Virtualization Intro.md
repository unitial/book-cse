## Virtualization - Introduction

C/S模型增强了模块之间的隔离性，在一定程度上解决了fate sharing的问题，但面临着成本太高的问题：不可能让每个模块都独立运行在单独的主机上，网络速度很多时候也是瓶颈。如何将多个模块放在同一个主机，但依然能达到C/S的隔离性？

Virtualization的目的就是为了让一台机器可以同时执行不同的模块，同时其效果和C/S接近，即每个模块以为其独占一台主机，而且隔离性能得到保证。Virtualization要做的事情就是把一台机器变成多个虚拟的运行环境，以运行用户的代码——这样的需求导致了OS的产生。

OS需要提供的运行环境同样包括CPU、内存和通信三部分。OS会将内存和CPU虚拟化成多个：对于内存使用的方法就是虚拟内存技术，允许每个进程看到独立的地址空间；对于CPU则使用了分时复用的技术，让CPU在不同线程之间来回切换，每次只运行一个时间片，从而让每个线程都以为自己独占CPU；对于网络则使用了Abstraction的方法，提出了一套新接口。

Abstraction是和Virtualization对应的方法。由于单机与多机必然有不同之处，没必要处处模拟之前C/S的接口，有些功能可以直接由底层的OS提供一组新的接口。例如，C/S会用到网络，模块间通信需要通过网络接口进行；而在单机上，OS则可以提供一组bounded buffer的接口来取代网络通信，这组接口是之前没有的，是对link本身的抽象，这个接口就是abstraction。



