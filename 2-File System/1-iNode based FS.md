## iNode Based File System

文件系统是层次化和模块化很好的例子。上层已经有了文件系统的抽象（即API：open、read、write等），底层可以把磁盘抽象成一个以block为粒度（4KB）的大数组，那么中间该如何组织？

这里介绍了7层。最重要的一层是inode number -> inode。在单台计算机中若只有一个文件系统，那么抽象出inode number已经足够了。文件名是为了让人更方便的使用，所以又要引入lookup，从文件名定位到inode number。在这里，文件名是数据而不是元数据，换句话说，**文件名和文件本身是没有直接关系的**。文件名本身不保存在文件的inode中，而是以数据的形式保存在目录中。（注意：文件和目录也没有直接关系，文件不保存在目录中，目录只是记录了文件名而已。）所以很自然，一个inode可以在多个目录里有文件名，这就是hard link。这是inode文件系统的一个重要特点，也是理解的关键。

之后，再理解soft link会相对简单：soft link的数据只是一个文件名的路径，所以要再做一次lookup找到对应的inode（当然也可能找不到）。



